const executers = require('../../../task_executers');

process.on('message', async ({ params, executer }) => {
    console.log('Child process received START message: ' + executer);
    let result = 'error';

    if (typeof executers[executer] !== 'function') {
        console.log(`ERROR!!! the process ${executer} is NOT implemented.`);
    } else {
        result = await executers[executer](params);
    }

    process.send(result);

    console.log('END message: ' + executer);
});
